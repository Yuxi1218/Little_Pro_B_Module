<launch>
  <!-- 定義一個參數 'use_rviz'，預設值為 'true' -->
  <arg name="use_rviz" default="true" />

  <!-- Hector SLAM 節點 -->
  <node pkg="hector_mapping" type="hector_mapping" name="hector_mapping" output="screen">
    
    <!-- 幀名稱 -->
    <!-- 地圖幀 -->
    <param name="map_frame" value="map" />
    <!-- 機器人的基底幀 -->
    <param name="base_frame" value="base_footprint" />
    <!-- 里程計幀 -->
    <param name="odom_frame" value="odom" />
    
    <!-- Tf 使用 -->
    <!-- 使用 TF 庫轉換雷射掃描 -->
    <param name="use_tf_scan_transformation" value="true"/>
    <!-- 不使用 TF 來獲取初始姿態估計 -->
    <param name="use_tf_pose_start_estimate" value="false"/>
    <!-- 發布從地圖到里程計的轉換 -->
    <param name="pub_map_odom_transform" value="true"/>
    
    <!-- 地圖大小 / 起始點 -->
    <!-- 地圖解析度，單位為每像素的米數 -->
    <param name="map_resolution" value="0.050"/>
    <!-- 地圖大小，單位為像素 -->
    <param name="map_size" value="2048"/>
    <!-- 地圖原點的 X 座標 -->
    <param name="map_start_x" value="0.5"/>
    <!-- 地圖原點的 Y 座標 -->
    <param name="map_start_y" value="0.5" />
    <!-- 地圖的多分辨率級別數 -->
    <param name="map_multi_res_levels" value="2" />
    
    <!-- 地圖更新參數 -->
    <!-- 更新空閒單元格的因子 -->
    <param name="update_factor_free" value="0.4"/>
    <!-- 更新佔用單元格的因子 -->
    <param name="update_factor_occupied" value="0.9" />    
    <!-- 機器人必須行進的最小距離才能更新地圖 -->
    <param name="map_update_distance_thresh" value="0.4"/>
    <!-- 機器人必須旋轉的最小角度才能更新地圖 -->
    <param name="map_update_angle_thresh" value="0.06" />
    <!-- 要考慮的雷射掃描的最小 Z 值 -->
    <param name="laser_z_min_value" value = "-1.0" />
    <!-- 要考慮的雷射掃描的最大 Z 值 -->
    <param name="laser_z_max_value" value = "1.0" />
    
    <!-- 廣告配置 -->
    <!-- 宣傳地圖服務 -->
    <param name="advertise_map_service" value="true"/>
    
    <!-- 掃描主題 -->
    <!-- 訂閱雷射掃描的主題 -->
    <param name="scan_topic" value="scan"/>

  </node>
  
  <!-- RViz -->
  <!-- 使用特定的配置文件啟動 RViz，取決於 'use_rviz' 參數 -->
  <node pkg="rviz" type="rviz" name="rviz" args="-d /home/saki/catkin_ws/gmapping.rviz" if="$(arg use_rviz)"/>

</launch>
